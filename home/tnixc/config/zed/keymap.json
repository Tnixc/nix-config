[
  // ============================================================
  // VIM MODE NORMAL + VISUAL (shared bindings)
  // ============================================================
  {
    "context": "Editor && (vim_mode == normal || vim_mode == visual) && !VimWaiting && !menu",
    "bindings": {
      // Window navigation (mirrors <C-h/j/k/l>)
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",

      // === LEADER (space) MAPPINGS ===

      // Save file (<leader>w)
      "space w": "workspace::Save",

      // Quit (<leader>q)
      "space q": "pane::CloseActiveItem",

      // Quit all (<leader>Q)
      "space shift-q": "zed::Quit",

      // === FIND GROUP (<leader>f) ===
      // Picker (<leader>f?)
      "space f shift-/": "command_palette::Toggle",
      // Live grep (<leader>fg)
      "space f g": "workspace::NewSearch",
      // Find files (<leader>ff)
      "space f f": "file_finder::Toggle",
      // Find history/recent (<leader>ft)
      "space f t": "file_finder::Toggle",
      // Git files (<leader>fd)
      "space f d": "file_finder::Toggle",
      // Open project (<leader>fo)
      "space f o": "projects::OpenRecent",
      // Buffers (<leader>f<Tab>)
      "space f tab": "tab_switcher::Toggle",
      // Undo history (<leader>fu) - no direct equivalent, use command palette
      // "space f u": "editor::Undo",

      // === LSP GROUP (<leader>l) ===
      // Code actions (<leader>lq)
      "space l q": "editor::ToggleCodeActions",
      // Document symbols (<leader>ld)
      "space l d": "outline::Toggle",
      // References (<leader>li)
      "space l i": "editor::FindAllReferences",
      // Workspace symbols (<leader>lh)
      "space l h": "project_symbols::Toggle",
      // Rename (<leader>lr)
      "space l r": "editor::Rename",
      // Format (<leader>lf)
      "space l f": "editor::Format",

      // === DIAGNOSTICS GROUP (<leader>x) ===
      // Diagnostics (<leader>xx)
      "space x x": "diagnostics::Deploy",
      // Diagnostics picker (<leader>xt)
      "space x t": "diagnostics::Deploy",
      // Buffer diagnostics (<leader>xX)
      "space x shift-x": "diagnostics::DeployCurrentFile",

      // === GIT GROUP (<leader>j) ===
      // Git branches (<leader>jb)
      "space j b": "git::Branch",
      // Toggle diffview (<leader>jj)
      "space j j": "git::Diff",
      // Next hunk (<leader>jo)
      "space j o": "editor::GoToHunk",
      // Prev hunk (<leader>ji)
      "space j i": "editor::GoToPreviousHunk",
      // Git panel toggle (<leader>jg)
      "space j g": "git_panel::ToggleFocus",

      // === GO TO GROUP (g) ===
      // Definition
      "g d": "editor::GoToDefinition",
      // Declaration
      "g shift-d": "editor::GoToDeclaration",
      // Implementation
      "g i": "editor::GoToImplementation",
      // Type definition
      "g t": "editor::GoToTypeDefinition",
      // References
      "g r": "editor::FindAllReferences",
      // Signature help
      "g s": "editor::ShowSignatureHelp",

      // === OTHER GROUP (<leader>d) ===
      // New file (<leader>df)
      "space d f": "workspace::NewFile",
      // Render markdown (<leader>dr)
      "space d r": "markdown::OpenPreview",
    },
  },

  // ============================================================
  // VIM MODE NORMAL ONLY
  // ============================================================
  {
    "context": "Editor && vim_mode == normal && !VimWaiting && !menu",
    "bindings": {
      // Move line up/down (Alt-j/k)
      "alt-j": "editor::MoveLineDown",
      "alt-k": "editor::MoveLineUp",

      // Dashboard toggle (<leader>a) - closest is welcome screen
      // "space a": "welcome::Toggle",

      // === MULTICURSOR (space m) ===
      // Zed doesn't have multicursor-nvim equivalent, but has some multi-cursor support
      // Add cursor at next match (<leader>mn) - use cmd-d equivalent
      "space m n": ["editor::SelectNext", { "replace_newest": false }],
      // Add cursor at all matches (<leader>ma)
      "space m a": "editor::SelectAllMatches",
      // Add cursor above (<leader>mk)
      "space m k": "editor::AddSelectionAbove",
      // Add cursor below (<leader>mj)
      "space m j": "editor::AddSelectionBelow",
    },
  },

  // ============================================================
  // VIM MODE VISUAL ONLY
  // ============================================================
  {
    "context": "Editor && vim_mode == visual && !VimWaiting && !menu",
    "bindings": {
      // Paste without yanking (p) - use vim::Paste which handles this
      // Keep selection after indent
      // These are handled by vim mode by default

      // Multicursor in visual
      "m": ["editor::SelectNext", { "replace_newest": false }],
      "shift-m": "editor::SelectAllMatches",
    },
  },

  // ============================================================
  // INSERT MODE
  // ============================================================
  {
    "context": "Editor && vim_mode == insert && !menu",
    "bindings": {
      // Alt-j/k for line movement even in insert mode
      "alt-j": "editor::MoveLineDown",
      "alt-k": "editor::MoveLineUp",
    },
  },

  // ============================================================
  // SURROUND (mini.surround equivalent)
  // Zed vim mode has built-in surround with ys, ds, cs
  // Your nvim config uses 's' for add surround - this conflicts with vim substitute
  // Keeping default ys for surround-add
  // ============================================================

  // ============================================================
  // COMMENT TOGGLE (mini.comment equivalent)
  // ============================================================
  {
    "context": "Editor && !menu",
    "bindings": {
      // Cmd+/ for comment toggle (like your <D-/> in nvim)
      "cmd-/": "editor::ToggleComments",
    },
  },

  // ============================================================
  // GLOBAL BINDINGS - WORKSPACE LEVEL (works everywhere)
  // ============================================================
  {
    "context": "Workspace",
    "bindings": {
      // Toggle terminal (Alt-l in your nvim)
      "alt-l": "workspace::ToggleBottomDock",

      // Toggle left dock/explorer (alt-g)
      "alt-g": "workspace::ToggleLeftDock",

      // Toggle right dock (alt-h)
      "alt-h": "workspace::ToggleRightDock",

      // File finder (alt-t)
      "alt-t": "file_finder::Toggle",

      // Tab switcher (alt-tab)
      "alt-tab": "tab_switcher::Toggle",

      // Diagnostics (alt-d)
      "alt-d": "diagnostics::Deploy",

      // Close buffer (Alt-w)
      "alt-w": "pane::CloseActiveItem",

      // Reopen closed item (alt-shift-t)
      "alt-shift-t": "pane::ReopenClosedItem",
    },
  },

  // ============================================================
  // EDITOR-SPECIFIC GLOBAL BINDINGS
  // ============================================================
  {
    "context": "Editor",
    "bindings": {
      // Format (alt-a) - only makes sense in editor
      "alt-a": "editor::Format",

      // Hover info (cmd-shift-k)
      "cmd-shift-k": "editor::Hover",

      // Accept edit prediction (alt-i)
      "alt-i": "editor::AcceptEditPrediction",
    },
  },

  // ============================================================
  // WINDOW RESIZING
  // ============================================================
  {
    "context": "Workspace",
    "bindings": {
      // Window resizing (ctrl+arrows) - Zed doesn't have direct resize actions
      // Using pane navigation instead or relying on mouse
    },
  },

  // ============================================================
  // BUFFER/TAB NAVIGATION BY NUMBER (Alt-1 through Alt-9)
  // ============================================================
  {
    "context": "Pane",
    "bindings": {
      "alt-1": ["pane::ActivateItem", 0],
      "alt-2": ["pane::ActivateItem", 1],
      "alt-3": ["pane::ActivateItem", 2],
      "alt-4": ["pane::ActivateItem", 3],
      "alt-5": ["pane::ActivateItem", 4],
      "alt-6": ["pane::ActivateItem", 5],
      "alt-7": ["pane::ActivateItem", 6],
      "alt-8": ["pane::ActivateItem", 7],
      "alt-9": ["pane::ActivateItem", 8],

      // Cycle buffers (Alt-Tab / Alt-Shift-Tab)
      "alt-shift-tab": "pane::ActivatePreviousItem",
    },
  },

  // ============================================================
  // TAB NAVIGATION (Alt-Shift-1 through Alt-Shift-9)
  // ============================================================
  {
    "context": "Workspace",
    "bindings": {
      // Close tab (Alt-Shift-w)
      "alt-shift-w": "pane::CloseActiveItem",
    },
  },

  // ============================================================
  // TERMINAL SPECIFIC
  // ============================================================
  {
    "context": "Terminal",
    "bindings": {
      // Window navigation from terminal
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",
    },
  },

  // ============================================================
  // DOCK PANELS (project panel, git panel, etc.)
  // ============================================================
  {
    "context": "Dock",
    "bindings": {
      // Pane navigation from docks
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",
    },
  },

  // ============================================================
  // PROJECT PANEL (like nvim file explorer keybinds)
  // ============================================================
  {
    "context": "ProjectPanel && !editing",
    "bindings": {
      // Open file
      "enter": "project_panel::Open",
      // New file
      "a": "project_panel::NewFile",
      // New directory
      "shift-a": "project_panel::NewDirectory",
      // Rename
      "r": "project_panel::Rename",
      // Delete
      "d": "project_panel::Delete",
      // Copy
      "y": "project_panel::Copy",
      // Cut
      "x": "project_panel::Cut",
      // Paste
      "p": "project_panel::Paste",
      // Collapse
      "h": "project_panel::CollapseSelectedEntry",
      // Expand
      "l": "project_panel::ExpandSelectedEntry",
    },
  },

  // ============================================================
  // BUFFER SEARCH (like your nvim search bindings)
  // ============================================================
  {
    "context": "BufferSearchBar",
    "bindings": {
      "escape": "buffer_search::Dismiss",
      "enter": "search::SelectNextMatch",
      "shift-enter": "search::SelectPreviousMatch",
    },
  },

  // ============================================================
  // CMD KEY SHORTCUTS (matching your <D-*> bindings)
  // ============================================================
  {
    "context": "Editor",
    "bindings": {
      // Select all (Cmd-a)
      "cmd-a": "editor::SelectAll",
      // Save (Cmd-s) - already default
      "cmd-s": "workspace::Save",
    },
  },

  // ============================================================
  // DISABLE CONFLICTING DEFAULT BINDINGS
  // ============================================================
  {
    "context": "Pane",
    "bindings": {
      // Disable ctrl-1 through ctrl-9 (your nvim has these as null)
      "ctrl-1": null,
      "ctrl-2": null,
      "ctrl-3": null,
      "ctrl-4": null,
      "ctrl-5": null,
      "ctrl-6": null,
      "ctrl-7": null,
      "ctrl-8": null,
      "ctrl-9": null,
    },
  },

  // ============================================================
  // SURROUND (mini.surround equivalent)
  // Your nvim uses 's' for add surround in normal mode
  // ============================================================
  {
    "context": "vim_mode == normal && !VimWaiting && !menu",
    "bindings": {
      "s": "vim::PushAddSurrounds",
    },
  },
  {
    "context": "vim_mode == visual && !VimWaiting && !menu",
    "bindings": {
      // Surround selection in visual mode
      "s": "vim::PushAddSurrounds",
    },
  },

  // ============================================================
  // COMPLETION MENU NAVIGATION
  // ============================================================
  {
    "context": "Editor && showing_completions",
    "bindings": {
      "ctrl-j": "editor::ContextMenuNext",
      "ctrl-k": "editor::ContextMenuPrevious",
    },
  },
]
